---
description: Python style & tooling for Qtile config (black/ruff/mypy)
globs:
  - modules/**/*.py
  - config.py
alwaysApply: true
---

- Target System Python (3.10 +). Prefer explicit, total **type hints** everywhere (functions, module-level objects).
- Formatting: **black** (line-length 88) and **ruff** (select E,F,W,I,N,UP,ANN,PL). Avoid `# noqa` unless justified.
- Modules must stay **focused and short** (≈200 lines max). Split when a file grows large.
- Use **expressive names**; avoid abbreviations. Favor small pure helpers over large classes.
- No wildcard imports. In `config.py`, compose from `modules/*` explicitly.
- Docstrings: one-line summary; expand only when intent isn’t obvious.
- Errors: prefer `Result`-like returns or narrow exceptions; never `except Exception` without re-raise.
- Side effects only in `config.py` and `hooks.py`. Modules should be import-safe.
- Keep startup fast: avoid slow I/O at import time.
- No random dependencies and always ask before adding non-standard packages.

> When generating code, format and lint as if `black` and `ruff` run on save. Include type annotations by default.
